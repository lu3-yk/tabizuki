
<div class="container-fluid">
  <div class="row justify-content-center mt-4">
    <div class="col-3 px-5">
      <!-- ユーザーの詳細 -->
      <table class="table table-borderless text-center">
        <tr>
          <td colspan=2>
            <%= image_tag @user.get_profile_image(150,150), class: "user-icon-mypage" %>
          </td>
        <tr class="h3">
          <td colspan=2><%= @user.name %></td>
        </tr>
        <tr>
          <td colspan=2><%= @user.introduction %></td>
        </tr>
        <tr>
          <td>
           <%= link_to follows_user_path(@user) do %>
            フォロー<%= @following_users.count %>
           <% end %>&emsp;
           <%= link_to followers_user_path(@user) do %>
             フォロワー<%= @follower_users.count %>
           <% end %>
          </td>
        </tr>
        <tr colspan=2>
          <td>
            <%= link_to likes_user_path(@user) do %>
              <i class="fas fa-grin-hearts fa-2x heart"></i>をした投稿一覧
            <% end %>
          </td>
        </tr>
        <tr>
          <td colspan=2>
            <% if user_signed_in? && @user == current_user %>
              <%= link_to edit_user_path(current_user.id) do %>
                プロフィール編集<i class="fas fa-cog"></i>
              <% end %>
            <% end %>
            <!--フォローボタン  -->
            <%= render "public/relationships/follow_btn", user: @user %>

          </td>
        </tr>
      </table>
      <!--都道府県カテゴリー-->
      <div data-user-id=<%= @user.id %> id="user-id"></div>

        <div class="item-categories mt-5 text-center">
          <%= link_to  user_path(@user.id), class: "prefecture-button", id: 'categoBtn' do %>
            都道府県から探す
          <% end %>
          <div id="tree_menu">
            <ul class="prefectureTree">
              <% @parents.each do |parent| %>
                <li class="prefecture_parent">
                  <%= link_to search_tweet_path(parent) do %>
                    <input type="button" value="<%= parent.name %>" name="<%= parent.id %>" class="parent_btn">
                  <% end %>
                </li>
              <% end %>
            </ul>
            <ul class="prefectureTree-child">
            </ul>
          </div>
        </div>
    </div>

    <!-- ユーザーの投稿一覧 -->
    <div class="d-flex align-content-around flex-wrap col-9 pl-3">
      <% if @tweets.exists? %>
          <% @tweets.each do |tweet| %>
            <div class="card-deck mr-1 mb-1" style="width:300px;">
              <div class="card shadow">
                <div class="text-center mt-2">
                  <%= link_to tweet_path(tweet.id) do %>
                    <%= image_tag tweet.get_image(250,250) %>
                  <% end %>
                </div>
                <div class="card-body">
                  <h4 class="card-title"><%= tweet.prefecture.name %></h4>
                  <h5 class="card-subtitle"><%= tweet.title %></h5>

                  <div class="d-flex justify-content-end">
                  <!--いいね機能-->
                    <div id = "like_btn_<%= tweet.id %>">
                      <%= render "public/likes/likes", tweet: tweet %>
                    </div>&emsp;
                    <%#= link_to "#{tweet.comments.count} ", tweet_path(tweet.id) %>
                    <!--コメント機能-->
                    <div>
                      <%= link_to tweet_path(tweet.id) do %>
                        <i class="far fa-comment fa-2x comment"></i><%= tweet.comments.count %>
                      <% end %>
                    </div>&emsp;
                    <%= link_to "詳細", tweet_path(tweet.id),class: "show" %>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
       <% else %>
          <div class="text-center col-9">投稿はありません</div>
      <% end %>
    </div>
</div>


